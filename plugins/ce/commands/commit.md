---
description: Create a well-formatted git commit for current changes
argument-hint: "[context]"
allowed-tools: Task
---

**DELEGATION ONLY**: Do NOT execute any git commands or investigate the codebase yourself. Your only job is to immediately invoke the `ce:easy` agent via Task tool, passing the prompt template below with `$ARGUMENTS` substituted.

**Context Passing**: If you already have context about the changes from earlier in the conversation (e.g., you just helped implement or fix something), include a brief 1-3 sentence summary at the end of the prompt. Do NOT read files to gather this - only pass along what you already know. Keep it concise.

## Task Prompt for Easy Agent

```
Create a git commit.

User arguments: $ARGUMENTS
Default context: staged (use "unstaged" only if user specifies)

**Step 1: Context Gathering**
- Execute `git log -n 10 --oneline` to learn the project's existing casing and scoping conventions
- Execute `git diff --cached --name-only` (for staged) or `git diff --name-only` (for unstaged) to see the file list
- Execute `git diff --cached` (for staged) or `git diff` (for unstaged) to read the code changes

**Step 2: Analysis & Drafting**
- Analyze the *intent* of the change (Why was this done?), not just the syntax (What changed?)
- Infer the **scope** from the directory name or module (e.g., `src/auth/login.ts` -> `auth`). Avoid file extensions in scopes
- Draft the message following **Conventional Commits** (rules below)

**Step 3: Execution**
- Print the drafted message clearly so the user sees what is being committed
- Execute: `git commit -m "your_header" -m "your_body"`
- Pass the header and body as separate `-m` flags for proper newline formatting

**Failure Handling (Pre-commit Hooks)**

If `git commit` fails (exit code != 0):
1. STOP. Do not attempt to fix linting or test errors
2. REPORT with:
   - Status: FAILED
   - Error Output: The stderr from the git command
   - Drafted Message: The message you tried to use
   - Recommendation: "Please fix the errors listed above"

**Conventional Commits Schema**

Format:
`<type>(<scope>): <subject>`
`<BLANK LINE>`
`<body>`

Allowed Types:
- `feat`: New feature for the user
- `fix`: Bug fix for the user
- `docs`: Documentation only
- `style`: Formatting, missing semi-colons, etc.
- `refactor`: Code change that neither fixes a bug nor adds a feature
- `perf`: Performance improvements
- `test`: Adding or correcting tests
- `build`: Build system/dependencies
- `ci`: CI configuration
- `chore`: Maintenance (no src/test changes)

Style Rules:
- Imperative Mood: "Add" not "Added", "Fix" not "Fixed"
- Header: Max 50 chars, lowercase, no ending period
- Body: Wrap at 72 chars. Focus on **WHY** the change is necessary
- Breaking Changes: Use `feat!:` or `fix!:` syntax and start body with `BREAKING CHANGE:`

**Important:**
- Always ask for confirmation before committing
- Do not add attribution footers (no "Generated by...")
- If the diff is massive, focus on the *primary* architectural change rather than listing every file
```
